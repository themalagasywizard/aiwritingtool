@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --radius: 0.5rem;
    --background: oklch(1 0 0);
    --foreground: oklch(0.141 0.005 285.823);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.141 0.005 285.823);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.141 0.005 285.823);
    --primary: oklch(0.21 0.006 285.885);
    --primary-foreground: oklch(0.985 0 0);
    --secondary: oklch(0.967 0.001 286.375);
    --secondary-foreground: oklch(0.21 0.006 285.885);
    --muted: oklch(0.967 0.001 286.375);
    --muted-foreground: oklch(0.552 0.016 285.938);
    --accent: oklch(0.967 0.001 286.375);
    --accent-foreground: oklch(0.21 0.006 285.885);
    --destructive: oklch(0.577 0.245 27.325);
    --destructive-foreground: oklch(0.985 0 0);
    --success: oklch(0.646 0.222 41.116);
    --success-foreground: oklch(0.985 0 0);
    --warning: oklch(0.828 0.189 84.429);
    --warning-foreground: oklch(0.141 0.005 285.823);
    --border: oklch(0.92 0.004 286.32);
    --input: oklch(0.92 0.004 286.32);
    --ring: oklch(0.705 0.015 286.067);
    --sidebar: oklch(0.985 0 0);
    --sidebar-foreground: oklch(0.141 0.005 285.823);
    --sidebar-primary: oklch(0.21 0.006 285.885);
    --sidebar-primary-foreground: oklch(0.985 0 0);
    --sidebar-accent: oklch(0.967 0.001 286.375);
    --sidebar-accent-foreground: oklch(0.21 0.006 285.885);
    --sidebar-border: oklch(0.92 0.004 286.32);
    --sidebar-ring: oklch(0.705 0.015 286.067);
  }

  .dark {
    --background: oklch(0.141 0.005 285.823);
    --foreground: oklch(0.985 0 0);
    --card: oklch(0.21 0.006 285.885);
    --card-foreground: oklch(0.985 0 0);
    --popover: oklch(0.21 0.006 285.885);
    --popover-foreground: oklch(0.985 0 0);
    --primary: oklch(0.92 0.004 286.32);
    --primary-foreground: oklch(0.21 0.006 285.885);
    --secondary: oklch(0.274 0.006 286.033);
    --secondary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.274 0.006 286.033);
    --muted-foreground: oklch(0.705 0.015 286.067);
    --accent: oklch(0.274 0.006 286.033);
    --accent-foreground: oklch(0.985 0 0);
    --destructive: oklch(0.704 0.191 22.216);
    --destructive-foreground: oklch(0.985 0 0);
    --success: oklch(0.488 0.243 264.376);
    --success-foreground: oklch(0.985 0 0);
    --warning: oklch(0.769 0.188 70.08);
    --warning-foreground: oklch(0.985 0 0);
    --border: oklch(1 0 0 / 10%);
    --input: oklch(1 0 0 / 15%);
    --ring: oklch(0.552 0.016 285.938);
    --sidebar: oklch(0.21 0.006 285.885);
    --sidebar-foreground: oklch(0.985 0 0);
    --sidebar-primary: oklch(0.488 0.243 264.376);
    --sidebar-primary-foreground: oklch(0.985 0 0);
    --sidebar-accent: oklch(0.274 0.006 286.033);
    --sidebar-accent-foreground: oklch(0.985 0 0);
    --sidebar-border: oklch(1 0 0 / 10%);
    --sidebar-ring: oklch(0.552 0.016 285.938);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground transition-colors duration-300;
  }
  
  /* Dark mode overrides */
  .dark {
    color-scheme: dark;
  }
  
  /* Apply dark mode to all background elements */
  .dark .sidebar {
    @apply bg-sidebar text-sidebar-foreground border-sidebar-border;
  }
  
  .dark header,
  .dark .header {
    @apply bg-card border-border text-foreground !important;
  }
  
  .dark main, 
  .dark .main-content,
  .dark .main {
    @apply bg-background text-foreground !important;
  }
  
  .dark .editor-content,
  .dark #editorContent {
    @apply bg-background text-foreground !important;
  }
  
  /* Make sure toolbar has dark styling */
  .dark .editor-toolbar,
  .dark .toolbar,
  .dark [class*="toolbar"] {
    @apply bg-card text-foreground border-border !important;
  }
  
  .dark .card, 
  .dark .bg-white, 
  .dark [class*="bg-white"],
  .dark .modal-content,
  .dark .dropdown-content,
  .dark #editorContent,
  .dark div[contenteditable="true"] {
    @apply bg-card text-foreground !important;
  }
  
  /* Fix text colors in dark mode */
  .dark .text-gray-400, 
  .dark .text-gray-500, 
  .dark .text-gray-600,
  .dark .text-textSecondary,
  .dark .text-text-secondary {
    @apply text-muted-foreground;
  }
  
  .dark .text-textPrimary,
  .dark .text-text-primary,
  .dark .text-gray-700,
  .dark .text-gray-800,
  .dark .text-gray-900 {
    @apply text-foreground;
  }
  
  /* Fix borders in dark mode */
  .dark .border-gray-100, 
  .dark .border-gray-200,
  .dark .border-gray-300 {
    @apply border-border;
  }
  
  /* Button styling in dark mode */
  .dark .btn-secondary,
  .dark .toolbar-btn {
    @apply bg-secondary text-secondary-foreground;
  }
  
  .dark .toolbar-btn:hover {
    @apply bg-primary/20 text-primary;
  }
  
  /* Dark mode for specific app elements */
  .dark #aiAssistPanel,
  .dark #loadProjectPanel,
  .dark #aiOutput,
  .dark #chatHistory,
  .dark #generateEditView,
  .dark #chatView,
  .dark .ai-mode-btn,
  .dark select,
  .dark textarea,
  .dark input[type="text"],
  .dark .prose {
    @apply bg-card text-foreground border-border !important;
  }
  
  /* Fix AI panel elements in dark mode */
  .dark #aiOutput,
  .dark textarea,
  .dark .bg-gray-50 {
    background-color: var(--card) !important;
    color: var(--card-foreground) !important;
    border-color: var(--border) !important;
  }
  
  /* Model selector and dropdown styling */
  .dark select,
  .dark #aiModel,
  .dark .ai-mode-btn:not(.active) {
    background-color: var(--secondary) !important;
    color: var(--secondary-foreground) !important;
    border-color: var(--border) !important;
  }
  
  /* Active/inactive states for AI mode buttons */
  .dark .ai-mode-btn.active {
    @apply bg-primary text-primary-foreground !important;
  }
  
  .dark .ai-mode-btn:not(.active):hover {
    background-color: var(--accent) !important;
    opacity: 0.8 !important;
  }
  
  /* Consistent button styling in dark mode */
  .dark .btn,
  .dark button[data-shadcn="button"],
  .dark [class*="btn-primary"],
  .dark .shadcn-btn,
  .dark [data-variant="default"] {
    background-color: var(--primary) !important;
    color: var(--primary-foreground) !important;
    border-color: var(--primary) !important;
  }
  
  .dark .btn:hover,
  .dark button[data-shadcn="button"]:hover,
  .dark [data-variant="default"]:hover {
    background-color: oklch(0.92 0.004 286.32 / 80%) !important;
    color: var(--primary-foreground) !important;
  }
  
  /* Fix AI tabs display */
  .dark #generateEditView,
  .dark #chatView {
    background-color: var(--background) !important;
    color: var(--foreground) !important;
  }
  
  .dark .chat-message.user {
    @apply bg-secondary text-secondary-foreground border-secondary;
  }
  
  .dark .chat-message.ai {
    @apply bg-primary text-primary-foreground;
  }
  
  .dark #newProjectModal,
  .dark #contextModal,
  .dark #aiModal {
    @apply bg-background/80;
  }
  
  .dark .character-node {
    filter: brightness(0.9);
  }
  
  .dark .character-tooltip {
    @apply bg-card;
  }

  /* Animation for transitions */
  .animate-in {
    animation: animateIn 0.3s ease-in-out;
  }

  @keyframes animateIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Monochrome button styles */
  button[data-variant="monochrome"],
  .btn-monochrome {
    @apply bg-foreground text-background border border-foreground !important;
  }
  
  .dark button[data-variant="monochrome"],
  .dark .btn-monochrome {
    @apply bg-foreground text-background border border-foreground !important;
  }
  
  button[data-variant="monochrome"]:hover,
  .btn-monochrome:hover {
    @apply bg-foreground/90 text-background !important;
  }
  
  .dark button[data-variant="monochrome"]:hover,
  .dark .btn-monochrome:hover {
    @apply bg-foreground/90 text-background !important;
  }

  /* Ensure all buttons in dark mode use proper colors */
  .dark button[data-shadcn="button"],
  .dark .btn,
  .dark [class*="btn-"],
  .dark [data-variant] {
    background-color: var(--foreground) !important;
    color: var(--background) !important;
    border-color: var(--foreground) !important;
  }
  
  .dark button[data-shadcn="button"]:hover,
  .dark .btn:hover,
  .dark [class*="btn-"]:hover {
    background-color: oklch(0.985 0 0 / 80%) !important;
    color: var(--background) !important;
  }
  
  /* Special handling for ghost buttons */
  .dark button[data-variant="ghost"],
  .dark .btn-ghost {
    @apply bg-transparent text-foreground hover:bg-foreground/20 !important;
  }
  
  .dark button[data-variant="ghost"]:hover,
  .dark .btn-ghost:hover {
    @apply bg-foreground/20 text-foreground !important;
  }
} 